-- ============================================
-- Phase 1.2: 질문 데이터 (카테고리별 2-3개씩, 총 24개)
-- ============================================
-- 작성일: 2025-01-16
-- 목적: 대표 질문 데이터를 실제 DB에 입력 (카테고리 17~24 매핑)
--
-- 전제 조건:
-- - categories (ID 17~24) 및 users (13명) 선행 생성 완료
-- - scripts/1-seed-users.sql 실행됨
--
-- 카테고리 매핑 (DB 고정 ID):
-- 17: 비자/법률 (visa)
-- 18: 취업/창업 (employment)
-- 19: 주거/부동산 (housing)
-- 20: 교육/학업 (education)
-- 21: 의료/건강 (medical)
-- 22: 금융/세금 (finance)
-- 23: 문화/생활 (culture)
-- 24: 교통/통신 (transportation)

-- 참고: author_id는 scripts/1-seed-users.sql의 고정 UUID를 사용
--   - 일반 사용자: 00000000-0000-0000-0000-000000000010, ...0011, ...0012
--   - Verified 전문가(베트남인/한국인): ...0001 ~ ...0009

-- ============================================
-- 17: 비자/법률 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  'E-9 비자 연장 신청 방법이 궁금합니다',
  '안녕하세요. 제 E-9 비자가 다음 달에 만료되는데 연장 신청을 어떻게 해야 하나요? 필요한 서류와 절차에 대해 자세히 알려주시면 감사하겠습니다. 회사에서 도와주지 않아서 혼자 준비해야 합니다.',
  '00000000-0000-0000-0000-000000000010',
  17,
  ARRAY['E-9','비자연장','외국인등록증'],
  'normal',
  'open',
  true
),
(
  'F-5 영주권 신청 자격 조건이 어떻게 되나요?',
  '한국에서 5년째 E-9 비자로 일하고 있습니다. 영주권(F-5) 신청이 가능한지, 어떤 조건을 충족해야 하는지 알고 싶습니다. 한국어 능력은 TOPIK 2급 있습니다.',
  '00000000-0000-0000-0000-000000000002',
  17,
  ARRAY['F-5','영주권','E-9'],
  'normal',
  'open',
  true
),
(
  'E-9에서 E-7 비자로 변경 가능한가요?',
  '제조업 공장에서 5년 일했는데 기술자격증을 취득했습니다. E-7 비자로 변경하고 싶은데 가능한가요? 변경 절차와 필요 서류를 알려주세요.',
  '00000000-0000-0000-0000-000000000003',
  17,
  ARRAY['E-9','E-7','비자변경'],
  'normal',
  'open',
  true
);

-- ============================================
-- 18: 취업/창업 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '공장 면접 때 어떤 질문을 하나요?',
  '다음 주에 자동차 부품 공장 면접이 있습니다. 어떤 질문들을 주로 하는지 알려주세요. 어떻게 준비하면 좋을까요?',
  '00000000-0000-0000-0000-000000000011',
  18,
  ARRAY['면접','공장','취업준비'],
  'normal',
  'open',
  true
),
(
  '급여 협상은 어떻게 하나요?',
  '이직을 하려고 하는데 새 회사에서 급여를 얼마 달라고 해야 할지 모르겠습니다. 협상 방법과 팁을 알려주세요.',
  '00000000-0000-0000-0000-000000000008',
  18,
  ARRAY['급여협상','이직','연봉'],
  'normal',
  'open',
  true
),
(
  '외국인도 한국에서 사업자 등록 가능한가요?',
  '작은 가게를 차리고 싶은데 외국인도 사업자 등록을 할 수 있나요? E-9 비자로는 안 되나요? 어떤 비자가 필요하고 절차는 어떻게 되나요?',
  '00000000-0000-0000-0000-000000000009',
  18,
  ARRAY['사업자등록','창업','외국인창업','비자'],
  'normal',
  'open',
  true
);

-- ============================================
-- 19: 주거/부동산 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '월세 계약할 때 주의사항',
  '처음으로 혼자 방을 구하려고 합니다. 월세 계약할 때 꼭 확인해야 할 것들이 무엇인가요? 사기 당하지 않으려면?',
  '00000000-0000-0000-0000-000000000005',
  19,
  ARRAY['월세','부동산','주거'],
  'normal',
  'open',
  true
),
(
  '외국인도 전세 계약 가능한가요? 보증금 안전하게 지키는 방법',
  '월세 대신 전세로 계약하고 싶은데 외국인도 가능한가요? 보증금이 큰데 안전하게 보호받을 수 있는 방법이 있을까요? 전세 사기 예방법도 알고 싶습니다.',
  '00000000-0000-0000-0000-000000000004',
  19,
  ARRAY['전세','보증금','전세사기예방'],
  'normal',
  'open',
  true
),
(
  '원룸 vs 오피스텔 vs 고시원 - 외국인에게 맞는 주거 형태는?',
  '한국에서 처음 집을 구하려고 합니다. 원룸, 오피스텔, 고시원의 차이가 뭔가요? 외국인이 계약하기 쉬운 것은 어떤 건가요? 각각의 장단점을 알려주세요.',
  '00000000-0000-0000-0000-000000000011',
  19,
  ARRAY['원룸','오피스텔','고시원','주거형태'],
  'normal',
  'open',
  true
);

-- ============================================
-- 20: 교육/학업 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  'TOPIK 2급 준비 어떻게 하셨나요?',
  'TOPIK 2급을 준비하고 있는데 어떤 교재와 방법으로 공부하는 것이 효과적일까요? 실제 합격하신 분들의 경험담을 듣고 싶습니다.',
  '00000000-0000-0000-0000-000000000012',
  20,
  ARRAY['TOPIK','한국어','시험'],
  'normal',
  'open',
  true
),
(
  '한국 대학 입학 조건이 궁금합니다',
  '한국 대학교에 진학하고 싶습니다. TOPIK 몇 급이 필요하고 어떤 서류를 준비해야 하나요?',
  '00000000-0000-0000-0000-000000000005',
  20,
  ARRAY['대학입학','D-2','TOPIK'],
  'normal',
  'open',
  true
),
(
  '무료 한국어 학원 추천해주세요',
  '한국어를 배우고 싶은데 학원비가 부담됩니다. 무료나 저렴한 한국어 학원이 있을까요?',
  '00000000-0000-0000-0000-000000000012',
  20,
  ARRAY['한국어학원','무료강좌','한국어'],
  'normal',
  'open',
  true
);

-- ============================================
-- 21: 의료/건강 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '건강보험 서류 온라인 발급 방법',
  '비자 연장하려고 하는데 건강보험 가입확인서가 필요합니다. 온라인으로 발급받을 수 있나요? 어떻게 하는지 알려주세요.',
  '00000000-0000-0000-0000-000000000010',
  21,
  ARRAY['건강보험','서류발급','비자연장'],
  'normal',
  'open',
  true
),
(
  '병원 갈 때 건강보험 사용 방법',
  '감기에 걸렸는데 병원에 처음 가봅니다. 건강보험을 어떻게 사용하나요? 비용은 얼마나 드나요?',
  '00000000-0000-0000-0000-000000000012',
  21,
  ARRAY['병원','건강보험','의료'],
  'normal',
  'open',
  true
),
(
  '응급실 이용 시 비용은 얼마나 나올까요?',
  '밤에 갑자기 아파서 응급실에 가야 할 것 같은데 비용이 걱정됩니다. 응급실 진료비는 얼마나 나오나요? 건강보험 적용되나요? 외국인등록증만 가지고 가면 되나요?',
  '00000000-0000-0000-0000-000000000011',
  21,
  ARRAY['응급실','응급진료','의료비'],
  'normal',
  'open',
  true
);

-- ============================================
-- 22: 금융/세금 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '한국 은행 계좌 개설 방법',
  '은행 계좌를 만들고 싶은데 어떤 서류가 필요한가요? 외국인등록증만 있으면 되나요?',
  '00000000-0000-0000-0000-000000000011',
  22,
  ARRAY['은행','계좌개설','금융'],
  'normal',
  'open',
  true
),
(
  '한국→베트남 송금, 가장 저렴하고 빠른 방법은?',
  '매달 가족에게 돈을 보내는데 은행 수수료가 너무 비쌉니다. 더 저렴하고 빠른 송금 방법이 있나요? 온라인 송금 서비스 추천해주세요.',
  '00000000-0000-0000-0000-000000000010',
  22,
  ARRAY['송금','수수료','베트남송금','환율'],
  'normal',
  'open',
  true
),
(
  '외국인 근로자 종합소득세 환급 받는 방법',
  '세금을 많이 냈는데 환급을 받을 수 있다고 들었습니다. 종합소득세 신고는 어떻게 하나요? 환급받으려면 어떤 서류가 필요한가요?',
  '00000000-0000-0000-0000-000000000007',
  22,
  ARRAY['종합소득세','세금환급','연말정산'],
  'normal',
  'open',
  true
);

-- ============================================
-- 23: 문화/생활 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '서울에서 저렴한 베트남 식료품 가게 추천',
  '안산에서 서울로 이사를 왔는데 베트남 식재료를 구하기가 어렵네요. 서울 지역에서 저렴하고 품질 좋은 베트남 식료품을 파는 곳이 있을까요?',
  '00000000-0000-0000-0000-000000000011',
  23,
  ARRAY['베트남식품','서울','쇼핑'],
  'normal',
  'open',
  true
),
(
  '주말에 베트남 친구들과 갈 만한 서울 여행지',
  '이번 주말에 베트남 친구들과 서울 구경하려고 합니다. 경복궁, 명동, 홍대 외에 또 어디가 좋을까요? 사진 찍기 좋고 재미있는 곳 추천해주세요.',
  '00000000-0000-0000-0000-000000000010',
  23,
  ARRAY['서울여행','관광지','주말나들이'],
  'normal',
  'open',
  true
),
(
  '한국 전통 문화 체험 프로그램 추천',
  '한복 입어보기, 김치 만들기 같은 한국 전통 문화 체험을 해보고 싶습니다. 외국인이 참여할 수 있는 무료나 저렴한 프로그램이 있나요?',
  '00000000-0000-0000-0000-000000000012',
  23,
  ARRAY['전통문화','한복','김치','문화체험'],
  'normal',
  'open',
  true
);

-- ============================================
-- 24: 교통/통신 (3개)
-- ============================================
INSERT INTO questions (title, content, author_id, category_id, tags, urgency, status, is_approved)
VALUES
(
  '교통카드는 어디서 충전하나요?',
  'T-money 카드를 샀는데 어디서 충전할 수 있나요? 편의점에서도 되나요?',
  '00000000-0000-0000-0000-000000000010',
  24,
  ARRAY['교통카드','T-money','대중교통'],
  'normal',
  'open',
  true
),
(
  '한국에서 운전면허 따는 방법',
  '베트남 운전면허증이 있는데 한국 면허로 바꾸려면 어떻게 해야 하나요? 시험을 다시 봐야 하나요?',
  '00000000-0000-0000-0000-000000000009',
  24,
  ARRAY['운전면허','면허전환','교통'],
  'normal',
  'open',
  true
),
(
  '휴대폰 개통할 때 비용이 얼마나 드나요?',
  '한국에서 휴대폰을 개통하려고 합니다. 월 요금이 얼마나 나오고 어떤 통신사가 좋은가요?',
  '00000000-0000-0000-0000-000000000011',
  24,
  ARRAY['휴대폰','통신','요금제'],
  'normal',
  'open',
  true
);

-- ============================================
-- 검증 쿼리
-- ============================================
-- 카테고리별 개수 확인 (방금 입력한 24개)
SELECT category_id, COUNT(*) AS count
FROM questions
WHERE created_at > NOW() - interval '1 hour'
GROUP BY category_id
ORDER BY category_id;

-- 최근 생성된 질문 10개 확인
SELECT q.id, q.title, c.name AS category, u.name AS author, q.created_at
FROM questions q
JOIN categories c ON q.category_id = c.id
JOIN users u ON q.author_id = u.id
ORDER BY q.created_at DESC
LIMIT 10;

