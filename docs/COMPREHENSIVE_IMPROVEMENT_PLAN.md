# VietHub 종합 개선 플랜 보고서

> 구버전 우위 기능 이식 + AI 콘텐츠 자동화 통합 플랜  
> 작성일: 2025-12-07  
> 우선순위: 현실화 가능성 및 비즈니스 임팩트 기준

---

## 1. 개선 영역 개요

| # | 영역 | 현재 상태 | 임팩트 | 난이도 | 우선순위 |
|---|-----|----------|--------|--------|---------|
| A | 전문가/인증 뱃지 | 부분 구현 | ⭐⭐⭐⭐⭐ | ⭐⭐ | **P0** |
| B | 온보딩 개인화 | 기본만 | ⭐⭐⭐⭐ | ⭐⭐ | **P1** |
| C | 토픽/구독 시스템 | 미구현 | ⭐⭐⭐⭐ | ⭐⭐⭐ | **P1** |
| D | 소셜 그래프/랭킹 | 미구현 | ⭐⭐⭐ | ⭐⭐⭐ | **P2** |
| E | 게이미피케이션 | 미구현 | ⭐⭐⭐ | ⭐⭐⭐⭐ | **P2** |
| F | FAQ/배너/이벤트 | 미구현 | ⭐⭐ | ⭐⭐ | **P3** |
| G | AI 콘텐츠 자동화 | 미구현 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **P3** |

---

## 2. P0: 전문가/인증 뱃지 시스템 (1주)

### 현황 분석
- **신버전**: `verification` 테이블/페이지 존재, 뱃지 표시 체계 없음
- **구버전**: `certifications` 관리, 전문가 신청, trust/expert 뱃지 표시

### 이식 범위

| 구성요소 | 작업 | 파일 |
|---------|-----|-----|
| **스키마** | 뱃지 타입/레벨 컬럼 | `src/lib/db/schema.ts` |
| **API** | 인증 승인 시 뱃지 부여 | `src/app/api/admin/verifications/[id]/route.ts` |
| **UI** | 프로필/답변에 뱃지 표시 | `PostCard`, `AnswerCard`, `UserProfile` |
| **관리자** | 뱃지 관리 패널 | `src/app/admin/certifications/` |

### 구현 상세

```
┌─────────────────────────────────────────────────────────────┐
│ 뱃지 타입                                                   │
├─────────────────────────────────────────────────────────────┤
│ verified_student  → 학생 인증 (재학증명서)                  │
│ verified_worker   → 직장인 인증 (재직증명서)                │
│ expert_visa       → 비자 전문가 (행정사/변호사)             │
│ expert_employment → 취업 전문가 (HR/채용담당)               │
│ trusted_answerer  → 신뢰 답변자 (채택률 80%+)              │
└─────────────────────────────────────────────────────────────┘
```

### 예상 효과
- 답변 신뢰도 향상 → 질문자 전환율 +30%
- 전문가 참여 유도 → 고품질 콘텐츠 증가

---

## 3. P1-A: 온보딩 개인화 강화 (1주)

### 현황 분석
- **신버전**: `FirstPostPromptModal` 기본 안내만
- **구버전**: 관심사/배경 수집 → 피드/추천 반영

### 이식 범위

| 단계 | 수집 항목 | 활용 |
|-----|----------|-----|
| Step 1 | 체류 자격 (D-2/E-7/F-6 등) | 카테고리 자동 추천 |
| Step 2 | 관심 토픽 (복수 선택) | 피드 필터링 |
| Step 3 | 한국어 수준 | UI 언어 기본값 |

### 구현 상세

```tsx
// src/components/molecules/OnboardingFlow.tsx
<OnboardingFlow>
  <StepVisaStatus onSelect={saveVisaStatus} />
  <StepInterests categories={categories} onSelect={saveInterests} />
  <StepLanguageLevel onSelect={saveLanguageLevel} />
  <StepComplete />
</OnboardingFlow>
```

### DB 변경
```sql
ALTER TABLE users ADD COLUMN visa_status VARCHAR(20);
ALTER TABLE users ADD COLUMN interests TEXT[]; -- 관심 카테고리 slug 배열
ALTER TABLE users ADD COLUMN korean_level VARCHAR(10); -- beginner/intermediate/advanced
```

---

## 4. P1-B: 토픽/구독 시스템 (1~2주)

### 현황 분석
- **신버전**: 카테고리 목록만, 구독 없음
- **구버전**: 토픽 슬러그 라우트, 구독 테이블, 구독 기반 피드

### 이식 범위

| 구성요소 | 작업 |
|---------|-----|
| **스키마** | `topic_subscriptions` 테이블 추가 |
| **API** | `/api/categories/[id]/subscribe` POST |
| **라우트** | `/[lang]/topics/[slug]` 토픽별 피드 페이지 |
| **UI** | 카테고리 옆 구독 버튼, 구독 피드 탭 |

### 구현 상세

```sql
CREATE TABLE topic_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  category_id UUID REFERENCES categories(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, category_id)
);
```

---

## 5. P2-A: 소셜 그래프/랭킹 패널 (2주)

### 현황 분석
- **신버전**: 팔로우/팔로워 기본 기능만
- **구버전**: 지표 컬럼(신뢰도/도움된 답변 수), 추천 패널, 랭킹

### 이식 범위

| 구성요소 | 작업 |
|---------|-----|
| **지표 컬럼** | `trust_score`, `helpful_answers`, `adoption_rate` |
| **추천 패널** | 사이드바에 추천 사용자 표시 |
| **랭킹 페이지** | `/[lang]/ranking` 주간/월간 랭킹 |

### 신뢰 점수 계산

```
trust_score = (adopted_answers × 3) + (helpful_votes × 1) + (followers × 0.5)
            - (reports × 5) - (spam_flags × 10)
```

---

## 6. P2-B: 게이미피케이션 (2~3주)

### 현황 분석
- **신버전**: 미구현
- **구버전**: 미션 시스템, 랭크 체계

### 이식 범위 (지갑 제외)

| 기능 | 설명 |
|-----|-----|
| **미션** | 일일/주간 미션 (첫 질문, 답변 3개, 채택 받기) |
| **랭크** | Bronze → Silver → Gold → Expert |
| **달성 UI** | 프로필에 랭크 배지, 미션 진행률 표시 |

### 미션 예시

| 미션 | 조건 | 보상 |
|-----|-----|-----|
| 첫 질문 | 첫 질문 작성 | +10 XP |
| 도움의 손길 | 답변 3개 작성 | +30 XP |
| 채택왕 | 답변 채택 받기 | +50 XP |
| 주간 활동가 | 7일 연속 로그인 | +100 XP |

---

## 7. P3-A: FAQ/배너/이벤트 (1~2주)

### 현황 분석
- **신버전**: 뉴스 섹션만 존재
- **구버전**: FAQ 페이지, 배너 관리, 이벤트 페이지

### 이식 범위

| 기능 | 라우트 | 관리자 |
|-----|-------|-------|
| FAQ | `/[lang]/faq` | `/admin/faq` |
| 배너 | 홈 상단 슬라이드 | `/admin/banners` |
| 이벤트 | `/[lang]/events/[slug]` | `/admin/events` |

---

## 8. P3-B: AI 콘텐츠 자동화 (3~4주)

### 목표
운영자 3명이 MCP/API로 콘텐츠 자동 생성 워크플로우 실행

### 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│ 운영자 (3 이메일)                                           │
│ ├── MCP/외부 트리거                                         │
│ └── 관리자 대시보드                                         │
└───────────────────────────┬─────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│ API: /api/ai/content                                        │
│ ├── 세션/토큰 인증 (운영자 화이트리스트)                    │
│ ├── 액션 분기: ask_seed | tag | answer_draft | translate   │
│ └── Zod 검증 + 타임아웃/폴백                                │
└───────────────────────────┬─────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│ 외부 LLM (OpenAI/Claude)                                    │
│ └── 프롬프트 템플릿 (톤/가이드/금지 콘텐츠)                 │
└───────────────────────────┬─────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│ DB: Supabase                                                │
│ ├── ai_content_cache (요약/번역 캐시)                       │
│ └── ai_generation_logs (성공률/레이턴시)                    │
└─────────────────────────────────────────────────────────────┘
```

### 액션별 기능

| 액션 | 입력 | 출력 | 활용 |
|-----|-----|-----|-----|
| `ask_seed` | 카테고리 | 질문 시드 5개 | 콘텐츠 시드 생성 |
| `tag` | 제목+본문 | 추천 태그 3~5개 | 글 작성 보조 |
| `answer_draft` | 질문 내용 | 답변 초안 | 운영자 답변 보조 |
| `translate` | 원문+타깃언어 | 번역문 | 다국어 콘텐츠 |
| `summary` | 본문 | 요약 (150자) | SEO 메타 |

### 필수 테이블

```sql
CREATE TABLE ai_content_cache (
  id UUID PRIMARY KEY,
  thread_id UUID,
  action VARCHAR(20),
  locale VARCHAR(5),
  content TEXT,
  created_at TIMESTAMPTZ,
  expires_at TIMESTAMPTZ
);

CREATE TABLE ai_generation_logs (
  id UUID PRIMARY KEY,
  action VARCHAR(20),
  prompt_hash VARCHAR(64),
  latency_ms INT,
  status VARCHAR(10),
  error_code VARCHAR(20),
  created_at TIMESTAMPTZ
);
```

---

## 9. 마일스톤 로드맵

```
Week 1 ─────────────────────────────────────────────────
├─ [P0] 전문가/인증 뱃지 스키마 + API + UI
└─ [P1] 온보딩 개인화 흐름 구현

Week 2 ─────────────────────────────────────────────────
├─ [P1] 토픽 구독 테이블 + API
├─ [P1] 토픽별 피드 페이지
└─ [P0] 뱃지 관리자 패널

Week 3 ─────────────────────────────────────────────────
├─ [P2] 소셜 지표 컬럼 + 추천 패널
├─ [P2] 랭킹 페이지
└─ [P2] 게이미피케이션 미션 스키마

Week 4 ─────────────────────────────────────────────────
├─ [P2] 미션 엔진 + 달성 UI
├─ [P3] FAQ/배너 기본 구조
└─ [P3] AI 콘텐츠 API 골격

Week 5~6 ───────────────────────────────────────────────
├─ [P3] AI 콘텐츠 액션 구현 (tag, answer_draft)
├─ [P3] 다국어 요약/번역 + SEO 연동
└─ 통합 테스트 + 버그 수정
```

---

## 10. 성공 지표

| 지표 | 현재 | 목표 | 측정 시점 |
|-----|-----|-----|----------|
| 전문가 답변 비율 | N/A | 30%+ | 4주 후 |
| 온보딩 완료율 | N/A | 70%+ | 2주 후 |
| 토픽 구독자 수 | 0 | 500+ | 4주 후 |
| AI 생성 콘텐츠 | 0 | 50건/주 | 6주 후 |
| 재방문율 (7일) | N/A | 40%+ | 4주 후 |

---

## 11. 리스크 및 대응

| 리스크 | 영향 | 대응 |
|-------|-----|-----|
| AI 비용 급증 | 운영비 증가 | 캐싱 적극 활용, 일일 한도 설정 |
| 전문가 검증 지연 | 뱃지 신뢰도 하락 | 관리자 알림 자동화 |
| 게이미피케이션 어뷰징 | 랭킹 왜곡 | 이상 패턴 탐지 로직 |
| 온보딩 이탈 | 데이터 수집 실패 | 스킵 허용 + 나중에 설정 유도 |

---

## 12. 결론

**즉시 착수 권장 (P0~P1)**:
1. 전문가/인증 뱃지 → 신뢰도 기반 플랫폼 차별화
2. 온보딩 개인화 → 사용자 리텐션 향상
3. 토픽 구독 → 맞춤 피드로 참여율 증가

**중기 (P2)**:
- 소셜 그래프/랭킹으로 커뮤니티 활성화
- 게이미피케이션으로 지속 참여 유도

**장기 (P3)**:
- FAQ/배너/이벤트로 운영 효율화
- AI 콘텐츠 자동화로 콘텐츠 확장
